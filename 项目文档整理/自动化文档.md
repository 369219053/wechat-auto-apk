# è‡ªåŠ¨åŒ–æ–‡æ¡£

æœ¬æ–‡æ¡£è®°å½•å¾®ä¿¡ç§åŸŸè‡ªåŠ¨åŒ–APKçš„å¼€å‘è¿›åº¦å’ŒæŠ€æœ¯å®ç°ã€‚

---

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

**é¡¹ç›®åç§°**: å¾®ä¿¡ç§åŸŸè‡ªåŠ¨åŒ–APK
**æŠ€æœ¯æ–¹æ¡ˆ**: AndroidåŸç”Ÿ + AccessibilityService
**å¼€å‘è¯­è¨€**: Java
**ç›®æ ‡è®¾å¤‡**: vivoæ‰‹æœº (Android 15, SDK 35)
**å¼€å‘æ¨¡å¼**: å‘½ä»¤è¡Œç¼–è¯‘ + çœŸæœºæµ‹è¯•

---

## âœ… å·²å®ŒæˆåŠŸèƒ½

### 1ï¸âƒ£ åŸºç¡€æ¡†æ¶æ­å»º (2026-01-04)

#### é¡¹ç›®åˆå§‹åŒ–
- âœ… åˆ›å»ºAndroidé¡¹ç›®ç»“æ„
- âœ… é…ç½®Gradleæ„å»ºç¯å¢ƒ
- âœ… å‡çº§åˆ°Gradle 8.13 + AGP 8.13.1
- âœ… ç”Ÿæˆåº”ç”¨å›¾æ ‡ (ç»¿è‰²Wå›¾æ ‡)

#### ä¸»ç•Œé¢å¼€å‘
- âœ… MainActivity - åº”ç”¨ä¸»ç•Œé¢
- âœ… æœåŠ¡çŠ¶æ€æ˜¾ç¤º (æ— éšœç¢æœåŠ¡ã€æ‚¬æµ®çª—æƒé™)
- âœ… å¯åŠ¨/åœæ­¢æŒ‰é’®
- âœ… Toastæç¤ºåé¦ˆ

#### æ— éšœç¢æœåŠ¡
- âœ… WeChatAccessibilityService - æ ¸å¿ƒæœåŠ¡
- âœ… æœåŠ¡ç”Ÿå‘½å‘¨æœŸç®¡ç†
- âœ… å•ä¾‹æ¨¡å¼å®ç°
- âœ… å¯åŠ¨å¾®ä¿¡åŠŸèƒ½

#### æƒé™ç®¡ç†
- âœ… PermissionHelper - æƒé™å·¥å…·ç±»
- âœ… æ— éšœç¢æœåŠ¡æƒé™æ£€æŸ¥
- âœ… æ‚¬æµ®çª—æƒé™æ£€æŸ¥å’Œç”³è¯·

---

### 2ï¸âƒ£ å¾®ä¿¡ç™»å½•æ£€æµ‹ (2026-01-08)

#### åŠŸèƒ½å®ç°
- âœ… é€šè¿‡RecyclerViewåˆ¤æ–­å¾®ä¿¡ç™»å½•çŠ¶æ€
- âœ… ä½¿ç”¨`com.tencent.mm:id/iq`ä½œä¸ºç™»å½•æ ‡è¯†
- âœ… åœ¨`onAccessibilityEvent`ä¸­è‡ªåŠ¨æ£€æµ‹
- âœ… æ—¥å¿—è¾“å‡ºæ£€æµ‹ç»“æœ

#### æŠ€æœ¯è¦ç‚¹
- å¾®ä¿¡ä¸»ç•Œé¢åŒ…å«RecyclerView (resource-id: `com.tencent.mm:id/iq`)
- æœªç™»å½•æ—¶è¯¥RecyclerViewä¸å­˜åœ¨
- å·²ç™»å½•æ—¶å¯ä»¥æ‰¾åˆ°è¯¥èŠ‚ç‚¹

---

### 3ï¸âƒ£ é€šè®¯å½•åŒæ­¥åŠŸèƒ½ (2026-01-08)

#### åŠŸèƒ½å®ç°
- âœ… è‡ªåŠ¨ç‚¹å‡»å¾®ä¿¡åº•éƒ¨å¯¼èˆªæ çš„"é€šè®¯å½•"æ ‡ç­¾
- âœ… é€šè¿‡æ–‡æœ¬"é€šè®¯å½•"æŸ¥æ‰¾èŠ‚ç‚¹
- âœ… è‡ªåŠ¨æŸ¥æ‰¾å¯ç‚¹å‡»çš„çˆ¶èŠ‚ç‚¹
- âœ… æ»šåŠ¨åŠ è½½æ‰€æœ‰å¥½å‹
- âœ… å»é‡å¤„ç†(ä½¿ç”¨HashSet)
- âœ… æŒ‰é¦–å­—æ¯æ’åº
- âœ… ä¿å­˜åˆ°SharedPreferences
- âœ… æ•°æ®æ ¼å¼å…¼å®¹æ€§å¤„ç†

#### UIåˆ†æç»“æœ
é€šè¿‡`uiautomator2`åˆ†æå¾®ä¿¡ä¸»ç•Œé¢,æ‰¾åˆ°é€šè®¯å½•æŒ‰é’®çš„ç»“æ„:

```xml
<node index="1"
      text=""
      resource-id="com.tencent.mm:id/nvt"
      class="android.widget.RelativeLayout"
      clickable="true"
      bounds="[180,1507][360,1608]">
    <node text="é€šè®¯å½•" bounds="[237,1567][303,1597]" />
</node>
```

**å…³é”®ä¿¡æ¯**:
- çˆ¶èŠ‚ç‚¹: `RelativeLayout`, resource-id=`com.tencent.mm:id/nvt`, clickable=true
- å­èŠ‚ç‚¹: æ–‡æœ¬"é€šè®¯å½•"
- åæ ‡: bounds=[180,1507][360,1608]

#### æŠ€æœ¯å®ç°

**æ–¹æ³•1: é€šè¿‡æ–‡æœ¬æŸ¥æ‰¾** (å·²é‡‡ç”¨)
```java
List<AccessibilityNodeInfo> nodes = rootNode.findAccessibilityNodeInfosByText("é€šè®¯å½•");
for (AccessibilityNodeInfo node : nodes) {
    AccessibilityNodeInfo clickableNode = findClickableParent(node);
    if (clickableNode != null) {
        clickableNode.performAction(AccessibilityNodeInfo.ACTION_CLICK);
    }
}
```

**æ–¹æ³•2: é€šè¿‡resource-idæŸ¥æ‰¾** (å¤‡é€‰)
```java
List<AccessibilityNodeInfo> nodes = rootNode.findAccessibilityNodeInfosByViewId(
    "com.tencent.mm:id/nvt"
);
```

**æ–¹æ³•3: é€šè¿‡åæ ‡ç‚¹å‡»** (å¤‡é€‰)
```java
// ä½¿ç”¨GestureDescriptionå®ç°åæ ‡ç‚¹å‡»
// ä¸­å¿ƒç‚¹: (270, 1557)
```

#### æŸ¥æ‰¾å¯ç‚¹å‡»çˆ¶èŠ‚ç‚¹çš„å·¥å…·æ–¹æ³•

```java
private AccessibilityNodeInfo findClickableParent(AccessibilityNodeInfo node) {
    if (node == null) return null;
    if (node.isClickable()) return node;

    AccessibilityNodeInfo parent = node.getParent();
    if (parent != null) {
        return findClickableParent(parent);
    }
    return null;
}
```

**é€’å½’æŸ¥æ‰¾é€»è¾‘**:
1. æ£€æŸ¥å½“å‰èŠ‚ç‚¹æ˜¯å¦å¯ç‚¹å‡»
2. å¦‚æœå¯ç‚¹å‡»,è¿”å›å½“å‰èŠ‚ç‚¹
3. å¦‚æœä¸å¯ç‚¹å‡»,é€’å½’æŸ¥æ‰¾çˆ¶èŠ‚ç‚¹
4. ç›´åˆ°æ‰¾åˆ°å¯ç‚¹å‡»èŠ‚ç‚¹æˆ–åˆ°è¾¾æ ¹èŠ‚ç‚¹

---

### 4ï¸âƒ£ è‡ªåŠ¨å‘é€ç§èŠæ¶ˆæ¯åŠŸèƒ½ (2026-01-09 ~ 2026-01-15)

#### åŠŸèƒ½å®ç°
- âœ… æœç´¢å¥½å‹å¹¶è¿›å…¥èŠå¤©ç•Œé¢
- âœ… å‘é€å¤šæ¡æ–‡å­—æ¶ˆæ¯ (é¡ºåºå‘é€)
- âœ… å‘é€å›¾ç‰‡æ¶ˆæ¯ (é€šè¿‡Intentåˆ†äº«)
- âœ… é€šè¿‡resource-idç²¾ç¡®å®šä½UIå…ƒç´ 
- âœ… æ™ºèƒ½ç­‰å¾…å’Œå»¶è¿Ÿå¤„ç†
- âœ… ä»»åŠ¡é˜Ÿåˆ—ç®¡ç†
- âœ… çœŸæœºæµ‹è¯•é€šè¿‡

#### æŠ€æœ¯è¦ç‚¹

**1. æœç´¢å¥½å‹**
- ç‚¹å‡»æœç´¢æŒ‰é’®: `com.tencent.mm:id/jha`
- è¾“å…¥å¥½å‹åç§°åˆ°æœç´¢æ¡†
- ç‚¹å‡»æœç´¢ç»“æœè¿›å…¥èŠå¤©ç•Œé¢

**2. å‘é€æ–‡å­—æ¶ˆæ¯**
- é€šè¿‡resource-idå®šä½èŠå¤©è¾“å…¥æ¡†: `com.tencent.mm:id/bkn`
- ä½¿ç”¨`ACTION_SET_TEXT`è¾“å…¥æ–‡å­—
- ç‚¹å‡»å‘é€æŒ‰é’®: `com.tencent.mm:id/bql`
- å‘é€å®Œæˆåæ ‡è®°ä¸ºå·²å‘é€,ç»§ç»­ä¸‹ä¸€æ¡

**3. å‘é€å›¾ç‰‡æ¶ˆæ¯**
- ä½¿ç”¨Intentåˆ†äº«æœºåˆ¶
- é€šè¿‡FileProvideræä¾›æ–‡ä»¶URI
- è‡ªåŠ¨æœç´¢å¥½å‹å¹¶ç‚¹å‡»å‘é€

**4. ä»»åŠ¡ç®¡ç†**
- å…ˆå‘é€æ‰€æœ‰æ–‡å­—æ¶ˆæ¯ (åœ¨èŠå¤©ç•Œé¢)
- å†å‘é€æ‰€æœ‰å›¾ç‰‡/è§†é¢‘æ¶ˆæ¯ (é€šè¿‡Intent)
- ä½¿ç”¨`sentMessageIndices`è·Ÿè¸ªå·²å‘é€æ¶ˆæ¯
- é¿å…é‡å¤å‘é€

**5. æ™ºèƒ½å»¶è¿Ÿ**
- ç‚¹å‡»æœç´¢æŒ‰é’®åå»¶è¿Ÿ1ç§’
- è¾“å…¥æœç´¢æ–‡æœ¬åå»¶è¿Ÿ1.5ç§’
- ç‚¹å‡»æœç´¢ç»“æœåå»¶è¿Ÿ2ç§’
- è¾“å…¥æ–‡å­—åå»¶è¿Ÿ800mså†ç‚¹å‡»å‘é€
- å‘é€å®Œæˆåå»¶è¿Ÿ1ç§’ç»§ç»­ä¸‹ä¸€æ¡

#### çœŸæœºæµ‹è¯•ç»“æœ
- âœ… æˆåŠŸæœç´¢å¥½å‹"ç”Ÿæ´»å·"
- âœ… æˆåŠŸè¿›å…¥èŠå¤©ç•Œé¢
- âœ… æˆåŠŸå‘é€ç¬¬ä¸€æ¡æ–‡å­—æ¶ˆæ¯"ä½ å¥½"
- âœ… æˆåŠŸå‘é€ç¬¬äºŒæ¡æ–‡å­—æ¶ˆæ¯"å“ˆå–½"
- âœ… æˆåŠŸå”¤èµ·Intentåˆ†äº«å›¾ç‰‡
- âœ… æ¶ˆæ¯æ­£å¸¸æ˜¾ç¤ºåœ¨èŠå¤©è®°å½•ä¸­

---

## ğŸ”§ æ ¸å¿ƒæŠ€æœ¯å®ç°

### å¯åŠ¨å¾®ä¿¡åŠŸèƒ½

**é—®é¢˜**: æœ€åˆä½¿ç”¨`PackageManager.getLaunchIntentForPackage()`æ— æ³•å¯åŠ¨å¾®ä¿¡

**è§£å†³æ–¹æ¡ˆ**: ç›´æ¥ä½¿ç”¨ComponentNameæŒ‡å®šå¾®ä¿¡çš„LauncherUI

<augment_code_snippet path="app/src/main/java/com/wechat/auto/service/WeChatAccessibilityService.java" mode="EXCERPT">
````java
private void launchWeChat() {
    Intent intent = new Intent();
    intent.setComponent(new ComponentName(
        "com.tencent.mm",
        "com.tencent.mm.ui.LauncherUI"
    ));
    intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TOP);
    startActivity(intent);
}
````
</augment_code_snippet>

**å…³é”®ç‚¹**:
- ä½¿ç”¨`ComponentName`ç›´æ¥æŒ‡å®šActivity
- æ·»åŠ `FLAG_ACTIVITY_NEW_TASK`æ ‡å¿—
- åœ¨æ— éšœç¢æœåŠ¡ä¸­è°ƒç”¨`startActivity()`

---

### æŒ‰é’®å¯ç”¨é€»è¾‘

**é—®é¢˜**: å¯åŠ¨æŒ‰é’®è¢«ç¦ç”¨,æ— æ³•ç‚¹å‡»

**åŸå› **: é”™è¯¯çš„å¯ç”¨æ¡ä»¶ - è¦æ±‚æœåŠ¡å·²è¿è¡Œæ‰èƒ½å¯åŠ¨

**ä¿®å¤**:
````java
// å¯åŠ¨æŒ‰é’®: åªè¦æ— éšœç¢æœåŠ¡å·²å¼€å¯å°±èƒ½ç‚¹å‡»
btnStartService.setEnabled(accessibilityEnabled);

// åœæ­¢æŒ‰é’®: æœåŠ¡è¿è¡Œä¸­æ‰èƒ½ç‚¹å‡»
btnStopService.setEnabled(accessibilityEnabled && serviceRunning);
````

---

### æ— éšœç¢æœåŠ¡é…ç½®

**é…ç½®æ–‡ä»¶**: `res/xml/accessibility_service_config.xml`

````xml
<accessibility-service
    android:accessibilityEventTypes="typeWindowStateChanged|typeWindowContentChanged"
    android:accessibilityFeedbackType="feedbackGeneric"
    android:accessibilityFlags="flagReportViewIds"
    android:canRetrieveWindowContent="true"
    android:notificationTimeout="100"
    android:packageNames="com.tencent.mm" />
````

**å…³é”®é…ç½®**:
- `packageNames="com.tencent.mm"` - åªç›‘å¬å¾®ä¿¡
- `canRetrieveWindowContent="true"` - å…è®¸è¯»å–çª—å£å†…å®¹
- `flagReportViewIds` - æŠ¥å‘ŠView ID

---

## ğŸš€ å¼€å‘æµç¨‹

### å¿«é€Ÿè¿­ä»£æµç¨‹

````bash
# 1. ä¿®æ”¹ä»£ç 
# 2. ç¼–è¯‘APK (1ç§’)
export JAVA_HOME="/Applications/Android Studio.app/Contents/jbr/Contents/Home"
./gradlew assembleDebug

# 3. å®‰è£…åˆ°çœŸæœº
adb -s 192.168.1.3:41239 install -r app/build/outputs/apk/debug/app-debug.apk

# 4. çœŸæœºæµ‹è¯•
# 5. åé¦ˆé—®é¢˜,ç»§ç»­è¿­ä»£
````

**æ•ˆç‡**: ä»ä¿®æ”¹åˆ°å®‰è£…å®Œæˆçº¦**3-5ç§’**

---

## ğŸ“± æµ‹è¯•æµç¨‹

### é¦–æ¬¡ä½¿ç”¨æµç¨‹

1. **å®‰è£…APK**
   ````bash
   adb install app-debug.apk
   ````

2. **å¼€å¯æ— éšœç¢æœåŠ¡**
   - æ‰“å¼€WeChatAutoåº”ç”¨
   - ç‚¹å‡»"å¼€å¯æ— éšœç¢æœåŠ¡"
   - åœ¨è®¾ç½®ä¸­æ‰¾åˆ°"WeChatAuto"
   - æ‰“å¼€å¼€å…³

3. **å¯åŠ¨è‡ªåŠ¨åŒ–ä»»åŠ¡**
   - è¿”å›WeChatAutoåº”ç”¨
   - ç‚¹å‡»"å¯åŠ¨è‡ªåŠ¨åŒ–ä»»åŠ¡"
   - è‡ªåŠ¨æ‰“å¼€å¾®ä¿¡ âœ…

---

## ğŸ› å·²è§£å†³çš„é—®é¢˜

### é—®é¢˜1: Gradleç‰ˆæœ¬ä¸å…¼å®¹

**ç°è±¡**: Android Studioæç¤ºGradleç‰ˆæœ¬è¿‡ä½

**è§£å†³**:
- å‡çº§gradle-wrapper.properties: `gradle-8.13`
- å‡çº§AGP: `8.13.1`

---

### é—®é¢˜2: ç¼–è¯‘å¤±è´¥ - ç¼ºå°‘åº”ç”¨å›¾æ ‡

**ç°è±¡**:
````
error: resource mipmap/ic_launcher not found
````

**è§£å†³**: ä½¿ç”¨ImageMagickç”Ÿæˆåº”ç”¨å›¾æ ‡
````bash
convert -size 192x192 xc:#4CAF50 -gravity center \
  -pointsize 96 -fill white -annotate +0+0 "W" \
  app/src/main/res/mipmap-xxxhdpi/ic_launcher.png
````

---

### é—®é¢˜3: gradle-wrapper.jaræŸå

**ç°è±¡**:
````
ClassNotFoundException: org.gradle.wrapper.GradleWrapperMain
````

**è§£å†³**: é‡æ–°ä¸‹è½½wrapper
````bash
curl -L -o gradle/wrapper/gradle-wrapper.jar \
  https://raw.githubusercontent.com/gradle/gradle/master/gradle/wrapper/gradle-wrapper.jar
````

---

### é—®é¢˜4: å¯åŠ¨æŒ‰é’®æ— ååº”

**ç°è±¡**: ç‚¹å‡»æŒ‰é’®æ²¡æœ‰ä»»ä½•ååº”

**åŸå› **: æŒ‰é’®è¢«ç¦ç”¨ (é”™è¯¯çš„å¯ç”¨é€»è¾‘)

**è§£å†³**: ä¿®æ­£æŒ‰é’®å¯ç”¨æ¡ä»¶

---

### é—®é¢˜5: æ— æ³•å¯åŠ¨å¾®ä¿¡

**ç°è±¡**: Toastæç¤º"ä»»åŠ¡å·²å¯åŠ¨",ä½†å¾®ä¿¡æ²¡æ‰“å¼€

**åŸå› **: `getLaunchIntentForPackage()`è¿”å›null

**è§£å†³**: ä½¿ç”¨ComponentNameç›´æ¥æŒ‡å®šActivity

---

## ğŸ“Š å¼€å‘è¿›åº¦

### V0.1 - åŸºç¡€æ¡†æ¶ âœ… (2026-01-04)

- [x] é¡¹ç›®åˆå§‹åŒ–
- [x] ä¸»ç•Œé¢å¼€å‘
- [x] æ— éšœç¢æœåŠ¡æ¡†æ¶
- [x] æƒé™ç®¡ç†
- [x] å¯åŠ¨å¾®ä¿¡åŠŸèƒ½

### V0.2 - é€šè®¯å½•åŒæ­¥ ğŸš§ (è¿›è¡Œä¸­)

- [x] æ£€æµ‹å¾®ä¿¡ç™»å½•çŠ¶æ€
- [x] ç‚¹å‡»é€šè®¯å½•æ ‡ç­¾
- [ ] è¯»å–é€šè®¯å½•åˆ—è¡¨
- [ ] æå–å¥½å‹ä¿¡æ¯
- [ ] åŒæ­¥åˆ°åç«¯æœåŠ¡å™¨

### V0.3 - AIæ™ºèƒ½ç§ä¿¡ ğŸ“‹ (è®¡åˆ’ä¸­)

- [ ] é€‰æ‹©å¥½å‹
- [ ] è¿›å…¥èŠå¤©ç•Œé¢
- [ ] å‘é€æ¶ˆæ¯
- [ ] AIæ¥å£é›†æˆ
- [ ] æ‰¹é‡å‘é€æ§åˆ¶

---

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **å¼€å‘è¯­è¨€**: Java
- **æœ€ä½SDK**: API 26 (Android 8.0)
- **ç›®æ ‡SDK**: API 34 (Android 14)
- **æ„å»ºå·¥å…·**: Gradle 8.13
- **Android Gradle Plugin**: 8.13.1
- **æ ¸å¿ƒæŠ€æœ¯**: AccessibilityService

---

## ğŸ”„ æœ€æ–°æ›´æ–°

### V0.4.2 (2026-01-14)

#### å›¾ç‰‡è§†é¢‘é€‰æ‹©åŠŸèƒ½
- âœ… **å›¾ç‰‡é€‰æ‹©**: ä½¿ç”¨Intent.ACTION_PICKä»ç³»ç»Ÿç›¸å†Œé€‰æ‹©å›¾ç‰‡
- âœ… **è§†é¢‘é€‰æ‹©**: ä½¿ç”¨Intent.ACTION_PICKä»ç³»ç»Ÿç›¸å†Œé€‰æ‹©è§†é¢‘
- âœ… **æ–‡ä»¶è·¯å¾„è·å–**: ä»URIé€šè¿‡MediaStoreæŸ¥è¯¢è·å–å®é™…æ–‡ä»¶è·¯å¾„
- âœ… **å­˜å‚¨æƒé™ç®¡ç†**: è‡ªåŠ¨è¯·æ±‚READ_MEDIA_IMAGES/VIDEOæƒé™(Android 13+)
- âœ… **æƒé™å…¼å®¹æ€§**: æ”¯æŒæ—§ç‰ˆREAD_EXTERNAL_STORAGEæƒé™(Android 12åŠä»¥ä¸‹)
- âœ… **æ¶ˆæ¯åˆ—è¡¨å±•ç¤º**: å›¾ç‰‡å’Œè§†é¢‘æ¶ˆæ¯æ­£ç¡®æ˜¾ç¤ºåœ¨æ¶ˆæ¯åˆ—è¡¨ä¸­
- âœ… **çœŸæœºæµ‹è¯•**: vivoæ‰‹æœºæµ‹è¯•é€šè¿‡,åŠŸèƒ½æ­£å¸¸

#### æŠ€æœ¯å®ç°
```java
// 1. é€‰æ‹©å›¾ç‰‡
Intent intent = new Intent(Intent.ACTION_PICK);
intent.setType("image/*");
startActivityForResult(intent, REQUEST_IMAGE_PICK);

// 2. é€‰æ‹©è§†é¢‘
Intent intent = new Intent(Intent.ACTION_PICK);
intent.setType("video/*");
startActivityForResult(intent, REQUEST_VIDEO_PICK);

// 3. è·å–æ–‡ä»¶è·¯å¾„
String[] projection = {MediaStore.MediaColumns.DATA};
Cursor cursor = getContentResolver().query(uri, projection, null, null, null);
String filePath = cursor.getString(columnIndex);

// 4. è¯·æ±‚æƒé™ (Android 13+)
ActivityCompat.requestPermissions(this,
    new String[]{
        Manifest.permission.READ_MEDIA_IMAGES,
        Manifest.permission.READ_MEDIA_VIDEO
    }, 100);
```

### V0.3.1 (2026-01-08)

#### ä¼˜åŒ–é€šè®¯å½•åŒæ­¥åŠŸèƒ½
- âœ… **æœ€å¤§æ»šåŠ¨æ¬¡æ•°**: 50æ¬¡ â†’ 500æ¬¡
- âœ… **æ»šåŠ¨æ—¶é•¿**: 500ms â†’ 800ms
- âœ… **ç­‰å¾…æ—¶é—´**: 1000ms â†’ 1500ms
- âœ… **åœæ­¢åˆ¤æ–­**: è¿ç»­3æ¬¡æ— æ–°å¥½å‹ â†’ è¿ç»­5æ¬¡æ— æ–°å¥½å‹

#### ä¿®å¤æ•°æ®å…¼å®¹æ€§é—®é¢˜
- âœ… ä¿®å¤ç‚¹å‡»"é…ç½®è‡ªåŠ¨åŒ–ä»»åŠ¡"é—ªé€€é—®é¢˜
- âœ… æ·»åŠ æ—§ç‰ˆæœ¬æ•°æ®å…¼å®¹æ€§è¯»å–é€»è¾‘
- âœ… è‡ªåŠ¨è½¬æ¢StringSetæ ¼å¼ä¸ºJSONå­—ç¬¦ä¸²æ ¼å¼

#### æŠ€æœ¯æ”¹è¿›
- âœ… ä½¿ç”¨JSONå­—ç¬¦ä¸²å­˜å‚¨å¥½å‹åˆ—è¡¨,ä¿æŒé¡ºåº
- âœ… ä¼˜åŒ–æ»šåŠ¨æ‰‹åŠ¿,æ›´æ…¢æ›´è‡ªç„¶
- âœ… å¢åŠ ç­‰å¾…æ—¶é—´,ç¡®ä¿åˆ—è¡¨åŠ è½½å®Œæˆ

### V0.3.0 (2026-01-08)

#### å®Œæˆé€šè®¯å½•åŒæ­¥åŠŸèƒ½
- âœ… è‡ªåŠ¨æ‰“å¼€å¾®ä¿¡é€šè®¯å½•
- âœ… æ»šåŠ¨åŠ è½½æ‰€æœ‰å¥½å‹
- âœ… å»é‡å¤„ç†(HashSet)
- âœ… æŒ‰é¦–å­—æ¯æ’åº
- âœ… ä¿å­˜åˆ°SharedPreferences
- âœ… å®æ—¶æ˜¾ç¤ºåŒæ­¥è¿›åº¦

#### æŠ€æœ¯å®ç°
- âœ… ä½¿ç”¨AccessibilityServiceè¯»å–UIå…ƒç´ 
- âœ… ä½¿ç”¨GestureDescriptionå®ç°æ»šåŠ¨æ‰‹åŠ¿
- âœ… æ™ºèƒ½åˆ¤æ–­æ˜¯å¦åˆ°è¾¾åˆ—è¡¨åº•éƒ¨
- âœ… é€’å½’æŸ¥æ‰¾å¯ç‚¹å‡»çˆ¶èŠ‚ç‚¹

---

## ï¿½ V0.5.0 (2026-01-15) - è‡ªåŠ¨å‘é€æ¶ˆæ¯åŠŸèƒ½

### åŠŸèƒ½æ¦‚è¿°
å®ç°å®Œæ•´çš„è‡ªåŠ¨å‘é€æ–‡å­—æ¶ˆæ¯æµç¨‹:
1. æ‰“å¼€å¾®ä¿¡
2. æœç´¢å¥½å‹
3. è¿›å…¥èŠå¤©ç•Œé¢
4. å‘é€æ–‡å­—æ¶ˆæ¯
5. è¿”å›ä¸»ç•Œé¢å¤„ç†ä¸‹ä¸€ä¸ªå¥½å‹

### æ ¸å¿ƒæŠ€æœ¯å®ç°

#### 1. ä»»åŠ¡æ•°æ®æ¨¡å‹
```java
// SendTask.java - ä»»åŠ¡æ•°æ®æ¨¡å‹
public class SendTask {
    private List<String> friendNames;  // å¥½å‹åˆ—è¡¨
    private List<Message> messages;     // æ¶ˆæ¯åˆ—è¡¨

    public static class Message {
        private String type;    // text/image/video
        private String content; // æ–‡å­—å†…å®¹æˆ–æ–‡ä»¶è·¯å¾„
    }
}
```

#### 2. ä»»åŠ¡çŠ¶æ€ç®¡ç†
```java
// ä»»åŠ¡çŠ¶æ€æšä¸¾
private enum TaskState {
    IDLE,               // ç©ºé—²
    OPENING_WECHAT,     // æ‰“å¼€å¾®ä¿¡
    SEARCHING_FRIEND,   // æœç´¢å¥½å‹
    SENDING_MESSAGE,    // å‘é€æ¶ˆæ¯
    TASK_COMPLETED      // ä»»åŠ¡å®Œæˆ
}
```

#### 3. æœç´¢å¥½å‹åŠŸèƒ½
**å…³é”®UIå…ƒç´ **:
- æœç´¢æŒ‰é’®: `resource-id="com.tencent.mm:id/jha"`, `content-desc="æœç´¢"`
- æœç´¢è¾“å…¥æ¡†: `class="android.widget.EditText"` (ç¬¬ä¸€ä¸ª)
- æœç´¢ç»“æœ: é€šè¿‡å¥½å‹æ˜µç§°æŸ¥æ‰¾å¹¶ç‚¹å‡»

**å®ç°ä»£ç **:
```java
private void clickSearchButton() {
    // æ–¹æ³•1: é€šè¿‡resource-idæŸ¥æ‰¾
    List<AccessibilityNodeInfo> nodes = rootNode.findAccessibilityNodeInfosByViewId("com.tencent.mm:id/jha");

    // æ–¹æ³•2: é€šè¿‡content-descæŸ¥æ‰¾
    nodes = rootNode.findAccessibilityNodeInfosByText("æœç´¢");
    for (AccessibilityNodeInfo node : nodes) {
        if ("æœç´¢".equals(node.getContentDescription()) && node.isClickable()) {
            node.performAction(AccessibilityNodeInfo.ACTION_CLICK);
        }
    }
}
```

#### 4. è¾“å…¥æ–‡å­—åŠŸèƒ½
**å…³é”®æŠ€æœ¯**:
- ä½¿ç”¨æœ€åä¸€ä¸ªEditTextä½œä¸ºèŠå¤©è¾“å…¥æ¡†(é¿å…ä¸æœç´¢æ¡†å†²çª)
- å…ˆç‚¹å‡»è·å–ç„¦ç‚¹,å†è¾“å…¥æ–‡å­—
- ä½¿ç”¨`ACTION_SET_TEXT`è€Œéæ¨¡æ‹Ÿé”®ç›˜è¾“å…¥

**å®ç°ä»£ç **:
```java
private void sendTextMessage(String text) {
    List<AccessibilityNodeInfo> editTexts = findNodesByClassName(rootNode, "android.widget.EditText");
    // ä½¿ç”¨æœ€åä¸€ä¸ªEditText (èŠå¤©è¾“å…¥æ¡†åœ¨åº•éƒ¨)
    AccessibilityNodeInfo chatEditText = editTexts.get(editTexts.size() - 1);

    // å…ˆè·å–ç„¦ç‚¹
    chatEditText.performAction(AccessibilityNodeInfo.ACTION_FOCUS);

    // å»¶è¿Ÿåè¾“å…¥æ–‡å­—
    Bundle arguments = new Bundle();
    arguments.putCharSequence(AccessibilityNodeInfo.ACTION_ARGUMENT_SET_TEXT_CHARSEQUENCE, text);
    chatEditText.performAction(AccessibilityNodeInfo.ACTION_SET_TEXT, arguments);
}
```

#### 5. ç‚¹å‡»å‘é€æŒ‰é’®
**å…³é”®UIå…ƒç´ **:
- å‘é€æŒ‰é’®: `resource-id="com.tencent.mm:id/bql"`, `text="å‘é€"`, `class="android.widget.Button"`

**å®ç°ä»£ç **:
```java
private void clickSendButton() {
    // æ–¹æ³•1: é€šè¿‡resource-idæŸ¥æ‰¾
    List<AccessibilityNodeInfo> nodes = rootNode.findAccessibilityNodeInfosByViewId("com.tencent.mm:id/bql");

    // æ–¹æ³•2: é€šè¿‡textæŸ¥æ‰¾
    nodes = rootNode.findAccessibilityNodeInfosByText("å‘é€");
    for (AccessibilityNodeInfo node : nodes) {
        if ("å‘é€".equals(node.getText().toString()) && node.isClickable()) {
            node.performAction(AccessibilityNodeInfo.ACTION_CLICK);
        }
    }
}
```

#### 6. ä»»åŠ¡é˜Ÿåˆ—ç®¡ç†
**æµç¨‹æ§åˆ¶**:
```java
private void handleNextFriend() {
    currentFriendIndex++;

    if (currentFriendIndex >= currentTask.getFriendNames().size()) {
        taskCompleted();  // æ‰€æœ‰å¥½å‹å¤„ç†å®Œæˆ
        return;
    }

    // è¿”å›å¾®ä¿¡ä¸»ç•Œé¢
    performGlobalAction(GLOBAL_ACTION_BACK);  // ç¬¬ä¸€æ¬¡è¿”å›
    performGlobalAction(GLOBAL_ACTION_BACK);  // ç¬¬äºŒæ¬¡è¿”å›åˆ°ä¸»ç•Œé¢

    // æœç´¢ä¸‹ä¸€ä¸ªå¥½å‹
    String nextFriend = currentTask.getFriendNames().get(currentFriendIndex);
    searchFriend(nextFriend);
}
```

### æ—¶é—´å»¶è¿Ÿä¼˜åŒ–

| æ­¥éª¤ | å»¶è¿Ÿæ—¶é—´ | è¯´æ˜ |
|------|---------|------|
| æ‰“å¼€å¾®ä¿¡ â†’ ç‚¹å‡»æœç´¢ | 1000ms | ç­‰å¾…å¾®ä¿¡ä¸»ç•Œé¢åŠ è½½ |
| ç‚¹å‡»æœç´¢ â†’ è¾“å…¥å¥½å‹å | 2500ms | ç­‰å¾…æœç´¢ç•Œé¢æ‰“å¼€ |
| è¾“å…¥å¥½å‹å â†’ ç‚¹å‡»ç»“æœ | 4000ms | ç­‰å¾…æœç´¢ç»“æœå‡ºç° |
| ç‚¹å‡»ç»“æœ â†’ å‘é€æ¶ˆæ¯ | 6000ms | **å…³é”®**:ç­‰å¾…èŠå¤©ç•Œé¢å®Œå…¨åŠ è½½ |
| è¾“å…¥æ–‡å­— â†’ ç‚¹å‡»å‘é€ | 800ms | ç­‰å¾…æ–‡å­—è¾“å…¥å®Œæˆ |
| å‘é€æ¶ˆæ¯ â†’ ä¸‹ä¸€æ¡æ¶ˆæ¯ | 1000ms | ç­‰å¾…æ¶ˆæ¯å‘é€å®Œæˆ |

### å…³é”®é—®é¢˜è§£å†³

#### é—®é¢˜1: æœç´¢æ¡†å®šä½ä¸å‡†ç¡®
**ç°è±¡**: æ‰“å¼€çš„ä¸æ˜¯å³ä¸Šè§’çš„æœç´¢æ¡†
**åŸå› **: ä½¿ç”¨æ–‡å­—"æœç´¢"æŸ¥æ‰¾,å¯èƒ½åŒ¹é…åˆ°å…¶ä»–æœç´¢æŒ‰é’®
**è§£å†³**: ä½¿ç”¨`resource-id="com.tencent.mm:id/jha"`ç²¾ç¡®å®šä½

#### é—®é¢˜2: è¾“å…¥æ¡†å†²çª
**ç°è±¡**: åœ¨æœç´¢æ¡†è¾“å…¥å¥½å‹åå,ç«‹å³è¢«æ¶ˆæ¯å†…å®¹è¦†ç›–
**åŸå› **: æœç´¢æ¡†å’ŒèŠå¤©è¾“å…¥æ¡†éƒ½æ˜¯EditText,å®šä½é”™è¯¯
**è§£å†³**: ä½¿ç”¨æœ€åä¸€ä¸ªEditTextä½œä¸ºèŠå¤©è¾“å…¥æ¡†(èŠå¤©è¾“å…¥æ¡†åœ¨åº•éƒ¨)

#### é—®é¢˜3: å‘é€æŒ‰é’®ç‚¹å‡»å¤±è´¥
**ç°è±¡**: æ–‡å­—è¾“å…¥æˆåŠŸ,ä½†æ²¡æœ‰ç‚¹å‡»å‘é€æŒ‰é’®
**åŸå› **: é€šè¿‡text="å‘é€"æŸ¥æ‰¾,ä½†æ²¡æœ‰éªŒè¯æ–‡å­—å®Œå…¨åŒ¹é…
**è§£å†³**:
1. ä¼˜å…ˆä½¿ç”¨`resource-id="com.tencent.mm:id/bql"`
2. éªŒè¯`text.equals("å‘é€")`è€Œé`contains("å‘é€")`

### çœŸæœºæµ‹è¯•ç»“æœ

**æµ‹è¯•è®¾å¤‡**: vivoæ‰‹æœº (Android 15, SDK 35)
**æµ‹è¯•åœºæ™¯**:
- é€‰æ‹©1ä¸ªå¥½å‹
- æ·»åŠ 1æ¡æ–‡å­—æ¶ˆæ¯"ä½ å¥½"
- ç‚¹å‡»"å¼€å§‹æ‰§è¡Œä»»åŠ¡"

**æµ‹è¯•ç»“æœ**: âœ… å…¨éƒ¨é€šè¿‡
1. âœ… è‡ªåŠ¨æ‰“å¼€å¾®ä¿¡
2. âœ… è‡ªåŠ¨ç‚¹å‡»å³ä¸Šè§’æœç´¢å›¾æ ‡
3. âœ… è‡ªåŠ¨è¾“å…¥å¥½å‹æ˜µç§°"ç”Ÿæ´»å·"
4. âœ… è‡ªåŠ¨ç‚¹å‡»æœç´¢ç»“æœ
5. âœ… è‡ªåŠ¨åœ¨èŠå¤©è¾“å…¥æ¡†è¾“å…¥"ä½ å¥½"
6. âœ… è‡ªåŠ¨ç‚¹å‡»å‘é€æŒ‰é’®
7. âœ… æ¶ˆæ¯æˆåŠŸå‘é€

---

## ï¿½ğŸ“š ç›¸å…³æ–‡æ¡£

- [åŠŸèƒ½1: æœ‹å‹åœˆé‡‡é›†](./åŠŸèƒ½1-æœ‹å‹åœˆé‡‡é›†.md)
- [åŠŸèƒ½2: é€šè®¯å½•åŒæ­¥](./åŠŸèƒ½2-é€šè®¯å½•åŒæ­¥.md)
- [å¼€å‘æŒ‡å—](./å¼€å‘æŒ‡å—.md) - å‘½ä»¤è¡Œç¼–è¯‘å’ŒçœŸæœºæµ‹è¯•
- [å¸¸è§é—®é¢˜](./å¸¸è§é—®é¢˜.md) - é—®é¢˜æ’æŸ¥å’Œè§£å†³æ–¹æ¡ˆ
- [Gitç‰ˆæœ¬è®°å½•](./Gitç‰ˆæœ¬è®°å½•.md)
- [README](../README.md) - é¡¹ç›®æ€»è§ˆ

---

[è¿”å›README](../README.md)
