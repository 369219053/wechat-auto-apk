# 微信私域自动化APK

## 📖 项目简介

基于Android原生AccessibilityService的微信私域自动化工具,支持朋友圈采集、AI智能私信等功能。**完全独立运行,无需电脑连接**,适配vivo、oppo、realme等主流Android手机,安全无风险,完全本地运行。

### 核心价值
- 🤖 **自动化运营**: 解放双手,自动完成重复性工作
- 📱 **独立运行**: APK安装后完全独立,无需电脑连接
- 🔒 **安全可靠**: 本地运行,无需root,数据不外泄
- 🎯 **精准营销**: AI生成个性化私信,提升转化率
- 📊 **数据管理**: 朋友圈数据结构化存储,便于分析

---

## ✨ 核心功能

### 功能1: 朋友圈自动采集 ✅
- 自动采集指定好友的朋友圈内容
- 支持文字、图片、视频链接提取
- 导出为Markdown文件
- 同步到飞书多维表格
- 支持批量采集和增量更新

### 功能2: AI智能私信 🚧
- 自动给指定好友(或全部好友)发送私信
- 结合聊天记录调用AI生成个性化文案
- 支持知识库集成,提供专业内容
- 智能控制发送频率,避免被检测
- 支持定时任务和批量发送

### 功能3: 后台运行与控制 🚧
- **后台运行**: 使用Android前台服务(Foreground Service),APK在后台持续运行,不影响正常使用微信
- **悬浮按键**: 基于WindowManager实现悬浮窗,在微信界面显示控制按钮,可拖动调整位置
- **脚本控制**: 点击悬浮按键展开控制面板,支持启动/暂停/停止脚本
- **实时监控**: 显示运行状态、任务进度、日志输出
- **权限管理**: 自动申请悬浮窗权限(SYSTEM_ALERT_WINDOW)和前台服务权限(FOREGROUND_SERVICE)
- **省电优化**: 支持锁屏后继续运行,使用低功耗模式延长电池续航

---

## 🛠️ 技术栈

### 核心技术
- **开发语言**: Java / Kotlin
- **自动化框架**: AccessibilityService (Android官方无障碍服务)
- **开发工具**: Android Studio
- **最低SDK**: Android 7.0 (API 24)
- **AI集成**: COZE API / OpenAI API

### Android原生技术
- **无障碍服务**: AccessibilityService (监听和控制微信UI)
- **前台服务**: Foreground Service (保持后台运行)
- **悬浮窗**: WindowManager + SYSTEM_ALERT_WINDOW权限
- **通知系统**: NotificationManager + NotificationChannel
- **权限管理**: Runtime Permissions (动态权限申请)

### 数据存储
- **本地数据库**: SQLite / Room
- **本地文件**: Markdown导出
- **云端存储**: 飞书多维表格API
- **配置存储**: SharedPreferences

### 网络通信
- **HTTP客户端**: OkHttp / Retrofit
- **JSON解析**: Gson / Moshi
- **异步处理**: Coroutines (Kotlin) / RxJava (Java)

---

## 🚀 快速开始

### 环境要求
- **手机**: Android 7.0+ (vivo、oppo、realme等)
- **微信**: 8.0+ 版本
- **开发环境**: Android Studio (仅开发时需要)

### 用户使用步骤

```bash
# 1. 下载APK文件
# 2. 安装到手机
# 3. 打开APP,授予无障碍服务权限
# 4. 授予悬浮窗权限
# 5. 配置参数(好友列表、AI API等)
# 6. 点击悬浮按键启动自动化任务
```

### 开发环境搭建

```bash
# 1. 安装Android Studio
# 下载地址: https://developer.android.com/studio

# 2. 克隆项目
git clone <项目地址>
cd 微信私域自动化APK

# 3. 用Android Studio打开项目

# 4. 配置SDK
# SDK版本: API 24 (Android 7.0) 及以上

# 5. 连接手机或启动模拟器
adb devices

# 6. 运行项目
# 点击Android Studio的Run按钮
```

---

## 📚 详细文档

### 核心文档
- [开发指南](./项目文档整理/开发指南.md) - 命令行编译和真机测试流程
- [自动化文档](./项目文档整理/自动化文档.md) - RPA步骤详解和技术实现
- [常见问题](./项目文档整理/常见问题.md) - 重大卡点问题与解决方法
- [功能1开发文档](./项目文档整理/功能1-朋友圈采集.md) - 朋友圈采集详细说明
- [功能2开发文档](./项目文档整理/功能2-AI智能私信.md) - AI私信详细说明
- [Git版本记录](./项目文档整理/Git版本记录.md) - 版本历史和提交记录

### ⚠️ 文档管理规范

**重要原则**:
1. **禁止随意创建新文档** - 所有内容必须在现有文档中更新,除非经过明确批准
2. **全局性更新** - 更新文档时应该是全局性质的改进,包括:
   - ✅ 纠正之前的错误和不准确的描述
   - ✅ 更新老旧的技术方案和代码示例
   - ✅ 优化文档结构和可读性
   - ✅ 补充遗漏的重要信息
   - ❌ 不是简单的内容堆砌和追加
3. **保持文档精简** - 每个文档控制在200-400行,超过则需要重构而非新建
4. **及时更新** - 每完成一个功能或解决一个问题,立即更新相关文档

**现有文档说明**:
- **README.md**: 项目总览和索引,包含核心功能、技术栈、快速开始、文档管理规范、Git版本记录
- **自动化文档.md**: 记录每个RPA步骤的技术实现,每完成一步立即更新
- **常见问题.md**: 记录重大卡点问题与解决方法,遇到问题立即记录
- **功能1-朋友圈采集.md**: 朋友圈采集功能的完整说明
- **功能2-AI智能私信.md**: AI智能私信功能的完整说明

**文档更新流程**:
1. 确定要更新的内容属于哪个现有文档
2. 阅读整个文档,理解现有结构和内容
3. 进行全局性更新:修正错误、更新技术、优化结构
4. 确保更新后文档的一致性和完整性
5. 更新文档末尾的"更新记录"

---

## 📁 项目结构

```
微信私域自动化APK/
├── README.md                           # 项目总览(本文件)
├── app/                                # Android应用主模块
│   ├── src/
│   │   ├── main/
│   │   │   ├── java/com/wechat/auto/  # Java/Kotlin源代码
│   │   │   │   ├── MainActivity.java          # 主Activity
│   │   │   │   ├── service/
│   │   │   │   │   ├── WeChatAccessibilityService.java  # 无障碍服务
│   │   │   │   │   └── ForegroundService.java           # 前台服务
│   │   │   │   ├── ui/
│   │   │   │   │   ├── FloatingWindow.java     # 悬浮窗
│   │   │   │   │   └── SettingsActivity.java   # 设置界面
│   │   │   │   ├── automation/
│   │   │   │   │   ├── MomentsCollector.java   # 朋友圈采集
│   │   │   │   │   └── AIMessenger.java        # AI私信
│   │   │   │   ├── data/
│   │   │   │   │   ├── database/               # 数据库
│   │   │   │   │   └── repository/             # 数据仓库
│   │   │   │   └── utils/                      # 工具类
│   │   │   ├── res/                   # 资源文件
│   │   │   │   ├── layout/            # 布局文件
│   │   │   │   ├── values/            # 字符串、颜色等
│   │   │   │   └── drawable/          # 图片资源
│   │   │   └── AndroidManifest.xml    # 应用配置
│   │   └── test/                      # 测试代码
│   └── build.gradle                   # 模块构建配置
├── gradle/                            # Gradle配置
├── 项目文档整理/                       # 项目文档
│   ├── 开发指南.md
│   ├── 自动化文档.md
│   ├── 常见问题.md
│   ├── 功能1-朋友圈采集.md
│   └── 功能2-AI智能私信.md
└── build/                             # 编译输出
    └── outputs/apk/                   # APK文件
```

---

## 🔗 重要链接

- **GitHub仓库**: (待添加)
- **在线文档**: (待添加)
- **问题反馈**: (待添加)
- **飞书多维表格**: (待添加)

---

## 📅 更新日志

### V0.3.0 (2026-01-08) - 通讯录功能开发
- ✅ **微信登录检测**: 通过RecyclerView判断登录状态
- ✅ **点击通讯录标签**: 自动点击底部导航栏通讯录
- ✅ **UI分析工具**: 使用uiautomator2分析微信UI结构
- ✅ **真机测试通过**: vivo手机 (Android 15) 测试成功

### V0.2.0 (2026-01-04) - 重大技术决策
- 🔄 **技术方案变更**: 从Python + uiautomator2 转向 Android原生开发
- ✅ 采用AccessibilityService实现完全独立运行
- ✅ 更新技术栈和项目结构
- ✅ 更新所有文档以反映新技术方案

### V0.1.2 (2026-01-04)
- ✅ 创建独立的Git版本记录文档
- ✅ 优化README结构

### V0.1.1 (2026-01-04)
- ✅ 优化文档结构
- ✅ 添加文档管理规范

### V0.1.0 (2026-01-04)
- ✅ 项目初始化
- ✅ 创建项目文档结构
- ✅ 完成技术方案调研

> 📝 完整版本历史请查看: [Git版本记录](./项目文档整理/Git版本记录.md)

---

## ⚠️ 免责声明

本项目仅供学习和研究使用,请勿用于商业用途。使用本工具时请遵守微信用户协议和相关法律法规,尊重他人隐私。因使用本工具造成的任何后果,由使用者自行承担。

---

## 📞 联系方式

如有问题或建议,请通过以下方式联系:
- 刀仔老板: (待添加)
- 开发者小牛马: (待添加)

---

**最后更新**: 2026-01-08
**当前版本**: V0.3.0
**开发状态**: 🚧 通讯录同步功能开发中
**技术方案**: AccessibilityService (完全独立运行)

