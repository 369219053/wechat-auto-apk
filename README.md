# 微信私域自动化APK

## 📖 项目简介

基于Android原生AccessibilityService的微信私域自动化工具,支持朋友圈采集、AI智能私信等功能。**完全独立运行,无需电脑连接**,适配vivo、oppo、realme等主流Android手机,安全无风险,完全本地运行。

### 核心价值
- 🤖 **自动化运营**: 解放双手,自动完成重复性工作
- 📱 **独立运行**: APK安装后完全独立,无需电脑连接
- 🔒 **安全可靠**: 本地运行,无需root,数据不外泄
- 🎯 **精准营销**: AI生成个性化私信,提升转化率
- 📊 **数据管理**: 朋友圈数据结构化存储,便于分析

---

## ✨ 核心功能

### 功能1: 通讯录同步与管理 ✅
- **自动同步通讯录**: 一键同步微信通讯录好友列表
- **好友信息展示**: 显示好友昵称和头像(首字母)
- **数据持久化**: 好友列表保存到本地,支持离线查看
- **同步时间记录**: 显示最后同步时间(刚刚/X分钟前/X小时前)
- **实时更新**: 每次回到APP自动刷新好友列表

### 功能2: 智能私信任务配置 🚧
#### 任务配置界面
- **步骤1: 选择好友**
  - ✅ 多选功能: 支持勾选多个好友
  - ✅ 全选功能: 一键全选/取消全选
  - ✅ 头像显示: 显示好友昵称首字母作为头像
  - ✅ 已选统计: 实时显示已选择好友数量

- **步骤2: 配置消息内容**
  - ✅ 文字消息: 输入框配置文字内容
  - 🚧 图片消息: 选择本地图片发送
  - 🚧 视频消息: 选择本地视频发送
  - 🚧 卡片消息: 配置分享卡片内容

- **步骤3: AI智能增强** (规划中)
  - 🔮 接入AI: 集成COZE API或OpenAI API
  - 🔮 知识库: 上传专业知识库,AI基于知识库回答
  - 🔮 个性化: 根据好友聊天记录生成个性化文案
  - 🔮 智能控制: 自动控制发送频率,避免被检测

#### 任务执行
- 🚧 批量发送: 向选中的好友批量发送消息
- 🚧 定时任务: 设置定时发送时间
- 🚧 进度监控: 实时显示发送进度和状态
- 🚧 失败重试: 发送失败自动重试

### 功能3: 朋友圈自动采集 ⏳
- 自动采集指定好友的朋友圈内容
- 支持文字、图片、视频链接提取
- 导出为Markdown文件
- 同步到飞书多维表格
- 支持批量采集和增量更新

---

## 🛠️ 技术栈

### 核心技术
- **开发语言**: Java / Kotlin
- **自动化框架**: AccessibilityService (Android官方无障碍服务)
- **开发工具**: Android Studio
- **最低SDK**: Android 7.0 (API 24)
- **AI集成**: COZE API / OpenAI API

### Android原生技术
- **无障碍服务**: AccessibilityService (监听和控制微信UI)
- **前台服务**: Foreground Service (保持后台运行)
- **悬浮窗**: WindowManager + SYSTEM_ALERT_WINDOW权限
- **通知系统**: NotificationManager + NotificationChannel
- **权限管理**: Runtime Permissions (动态权限申请)

### 数据存储
- **本地数据库**: SQLite / Room
- **本地文件**: Markdown导出
- **云端存储**: 飞书多维表格API
- **配置存储**: SharedPreferences

### 网络通信
- **HTTP客户端**: OkHttp / Retrofit
- **JSON解析**: Gson / Moshi
- **异步处理**: Coroutines (Kotlin) / RxJava (Java)

---

## 🚀 快速开始

### 环境要求
- **手机**: Android 7.0+ (vivo、oppo、realme等)
- **微信**: 8.0+ 版本
- **开发环境**: Android Studio (仅开发时需要)

### 用户使用步骤

```bash
# 1. 下载并安装APK文件到手机
# 2. 打开APP,点击"开启无障碍服务"
# 3. 在系统设置中找到"微信私域自动化",开启无障碍服务
# 4. 返回APP,点击"同步通讯录"
# 5. 等待微信自动打开并同步好友列表
# 6. 返回APP,点击"配置自动化任务"
# 7. 选择要发送消息的好友(支持多选、全选)
# 8. 配置消息内容(文字、图片、视频、卡片)
# 9. 点击"开始执行任务"
```

### 开发环境搭建

```bash
# 1. 安装Android Studio
# 下载地址: https://developer.android.com/studio

# 2. 克隆项目
git clone <项目地址>
cd 微信私域自动化APK

# 3. 用Android Studio打开项目

# 4. 配置SDK
# SDK版本: API 24 (Android 7.0) 及以上

# 5. 连接手机或启动模拟器
adb devices

# 6. 运行项目
# 点击Android Studio的Run按钮
```

---

## 📚 详细文档

### 核心文档
- [开发指南](./项目文档整理/开发指南.md) - 命令行编译和真机测试流程
- [自动化文档](./项目文档整理/自动化文档.md) - RPA步骤详解和技术实现
- [常见问题](./项目文档整理/常见问题.md) - 重大卡点问题与解决方法
- [功能1开发文档](./项目文档整理/功能1-朋友圈采集.md) - 朋友圈采集详细说明
- [功能2开发文档](./项目文档整理/功能2-AI智能私信.md) - AI私信详细说明
- [Git版本记录](./项目文档整理/Git版本记录.md) - 版本历史和提交记录

### ⚠️ 文档管理规范

**重要原则**:
1. **禁止随意创建新文档** - 所有内容必须在现有文档中更新,除非经过明确批准
2. **全局性更新** - 更新文档时应该是全局性质的改进,包括:
   - ✅ 纠正之前的错误和不准确的描述
   - ✅ 更新老旧的技术方案和代码示例
   - ✅ 优化文档结构和可读性
   - ✅ 补充遗漏的重要信息
   - ❌ 不是简单的内容堆砌和追加
3. **保持文档精简** - 每个文档控制在200-400行,超过则需要重构而非新建
4. **及时更新** - 每完成一个功能或解决一个问题,立即更新相关文档

**现有文档说明**:
- **README.md**: 项目总览和索引,包含核心功能、技术栈、快速开始、文档管理规范、Git版本记录
- **自动化文档.md**: 记录每个RPA步骤的技术实现,每完成一步立即更新
- **常见问题.md**: 记录重大卡点问题与解决方法,遇到问题立即记录
- **功能1-朋友圈采集.md**: 朋友圈采集功能的完整说明
- **功能2-AI智能私信.md**: AI智能私信功能的完整说明

**文档更新流程**:
1. 确定要更新的内容属于哪个现有文档
2. 阅读整个文档,理解现有结构和内容
3. 进行全局性更新:修正错误、更新技术、优化结构
4. 确保更新后文档的一致性和完整性
5. 更新文档末尾的"更新记录"

---

## 📁 项目结构

```
微信私域自动化APK/
├── README.md                           # 项目总览(本文件)
├── app/                                # Android应用主模块
│   ├── src/
│   │   ├── main/
│   │   │   ├── java/com/wechat/auto/  # Java源代码
│   │   │   │   ├── MainActivity.java              # 主Activity - 首页
│   │   │   │   ├── TaskConfigActivity.java        # 任务配置页面
│   │   │   │   ├── service/
│   │   │   │   │   └── WeChatAccessibilityService.java  # 无障碍服务
│   │   │   │   └── utils/
│   │   │   │       └── PermissionHelper.java       # 权限工具类
│   │   │   ├── res/                   # 资源文件
│   │   │   │   ├── layout/
│   │   │   │   │   ├── activity_main.xml           # 主页面布局
│   │   │   │   │   ├── activity_task_config.xml    # 任务配置页面布局
│   │   │   │   │   └── item_friend_checkbox.xml    # 好友列表项布局
│   │   │   │   ├── values/
│   │   │   │   │   └── strings.xml                 # 字符串资源
│   │   │   │   └── xml/
│   │   │   │       └── accessibility_service_config.xml  # 无障碍服务配置
│   │   │   └── AndroidManifest.xml    # 应用配置
│   │   └── test/                      # 测试代码
│   └── build.gradle                   # 模块构建配置
├── gradle/                            # Gradle配置
├── 项目文档整理/                       # 项目文档
│   ├── 开发指南.md
│   ├── 自动化文档.md
│   ├── 常见问题.md
│   ├── 功能1-朋友圈采集.md
│   └── 功能2-AI智能私信.md
└── build/                             # 编译输出
    └── outputs/apk/                   # APK文件
```

---

## 🔗 重要链接

- **GitHub仓库**: (待添加)
- **在线文档**: (待添加)
- **问题反馈**: (待添加)
- **飞书多维表格**: (待添加)

---

## 📅 更新日志

### V0.4.0 (2026-01-08) - 任务配置系统
- ✅ **任务配置页面**: 创建TaskConfigActivity,完整的任务配置界面
- ✅ **好友选择功能**: 支持多选、全选,显示头像和昵称
- ✅ **消息类型配置**: 支持文字、图片、视频、卡片消息类型选择
- ✅ **UI优化**: 好友列表带复选框和头像,交互体验优化
- ✅ **数据持久化**: 好友列表保存到SharedPreferences,支持离线查看

### V0.3.0 (2026-01-08) - 通讯录同步功能
- ✅ **通讯录同步**: 一键同步微信通讯录好友列表
- ✅ **好友列表显示**: 主页面显示同步的好友列表
- ✅ **同步时间记录**: 显示最后同步时间
- ✅ **自动刷新**: onResume时自动加载最新好友列表
- ✅ **微信登录检测**: 通过RecyclerView判断登录状态
- ✅ **点击通讯录标签**: 自动点击底部导航栏通讯录
- ✅ **UI分析工具**: 使用uiautomator2分析微信UI结构
- ✅ **真机测试通过**: vivo手机 (Android 15) 测试成功
- ✅ **Android 14兼容**: 修复BroadcastReceiver注册问题

### V0.2.0 (2026-01-04) - 重大技术决策
- 🔄 **技术方案变更**: 从Python + uiautomator2 转向 Android原生开发
- ✅ 采用AccessibilityService实现完全独立运行
- ✅ 更新技术栈和项目结构
- ✅ 更新所有文档以反映新技术方案

### V0.1.2 (2026-01-04)
- ✅ 创建独立的Git版本记录文档
- ✅ 优化README结构

### V0.1.1 (2026-01-04)
- ✅ 优化文档结构
- ✅ 添加文档管理规范

### V0.1.0 (2026-01-04)
- ✅ 项目初始化
- ✅ 创建项目文档结构
- ✅ 完成技术方案调研

> 📝 完整版本历史请查看: [Git版本记录](./项目文档整理/Git版本记录.md)

---

## ⚠️ 免责声明

本项目仅供学习和研究使用,请勿用于商业用途。使用本工具时请遵守微信用户协议和相关法律法规,尊重他人隐私。因使用本工具造成的任何后果,由使用者自行承担。

---

## 📞 联系方式

如有问题或建议,请通过以下方式联系:
- 刀仔老板: (待添加)
- 开发者小牛马: (待添加)

---

**最后更新**: 2026-01-08
**当前版本**: V0.4.0
**开发状态**: 🚧 任务配置系统开发中
**技术方案**: AccessibilityService (完全独立运行)

